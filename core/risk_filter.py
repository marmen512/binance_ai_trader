"""
Модуль для фільтрації ризикованих сигналів.
"""


def risk_filter(signal: str, prob: float, volatility: float) -> str:
    """
    Фільтрує сигнали на основі ризику.
    
    Повертає "HOLD" якщо:
    - Волатильність занадто висока (> 0.03 або 3%)
    - Впевненість моделі занадто низька (< 0.6 або 60%)
    
    Інакше повертає оригінальний сигнал.
    
    Args:
        signal: оригінальний сигнал ("BUY", "SELL" або "HOLD")
        prob: ймовірність/впевненість прогнозу (0-1)
        volatility: поточна волатильність (0-1, де 0.03 = 3%)
        
    Returns:
        відфільтрований сигнал ("BUY", "SELL" або "HOLD")
    """
    # Перевіряємо умови ризику
    if volatility > 0.03:
        return "HOLD"  # Занадто висока волатильність
    
    if prob < 0.6:
        return "HOLD"  # Низька впевненість моделі
    
    # Якщо всі перевірки пройдені, повертаємо оригінальний сигнал
    return signal
